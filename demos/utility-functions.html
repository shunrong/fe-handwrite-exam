<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å…·å‡½æ•°åº“æ¼”ç¤º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #20c997;
        }
        
        .demo-section h2 {
            color: #20c997;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: #20c997;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }
        
        .test-button:hover {
            background: #1aa085;
        }
        
        .test-button.primary { background: #007bff; }
        .test-button.success { background: #28a745; }
        .test-button.info { background: #17a2b8; }
        .test-button.warning { background: #ffc107; color: #212529; }
        
        .result {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .interactive-demo {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .function-demo {
            background: white;
            border: 2px solid #20c997;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .function-demo h4 {
            margin: 0 0 10px 0;
            color: #20c997;
        }
        
        .back-link {
            display: inline-block;
            color: #007bff;
            text-decoration: none;
            margin-bottom: 20px;
            padding: 8px 15px;
            border: 1px solid #007bff;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .back-link:hover {
            background: #007bff;
            color: white;
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
    
    <div class="demo-container">
        <h1>ğŸ”§ å·¥å…·å‡½æ•°åº“æ¼”ç¤º</h1>
        
        <div class="demo-section">
            <h2>ğŸ› å‡½æ•°æŸ¯é‡ŒåŒ–</h2>
            <p>æ¼”ç¤ºå‡½æ•°æŸ¯é‡ŒåŒ–çš„å„ç§å®ç°æ–¹å¼å’Œåº”ç”¨åœºæ™¯</p>
            
            <button class="test-button" onclick="testBasicCurry()">åŸºç¡€æŸ¯é‡ŒåŒ–</button>
            <button class="test-button primary" onclick="testCurryWithPlaceholder()">å ä½ç¬¦æŸ¯é‡ŒåŒ–</button>
            <button class="test-button success" onclick="testInfiniteCurry()">æ— é™æŸ¯é‡ŒåŒ–</button>
            <button class="test-button info" onclick="testCurryApplication()">å®é™…åº”ç”¨</button>
            
            <div class="result" id="curry-result"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ“¡ å‘å¸ƒè®¢é˜…æ¨¡å¼</h2>
            <p>æ¼”ç¤ºäº‹ä»¶å‘å¸ƒè®¢é˜…ç³»ç»Ÿçš„å®Œæ•´å®ç°</p>
            
            <button class="test-button" onclick="testBasicPubSub()">åŸºç¡€äº‹ä»¶</button>
            <button class="test-button primary" onclick="testEventPriority()">äº‹ä»¶ä¼˜å…ˆçº§</button>
            <button class="test-button success" onclick="testAsyncEvents()">å¼‚æ­¥äº‹ä»¶</button>
            <button class="test-button info" onclick="testEventNamespace()">äº‹ä»¶å‘½åç©ºé—´</button>
            
            <div class="result" id="pubsub-result"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ’¾ LRUç¼“å­˜</h2>
            <p>æ¼”ç¤ºæœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜ç®—æ³•çš„å®ç°</p>
            
            <button class="test-button" onclick="testLRUBasic()">åŸºç¡€LRU</button>
            <button class="test-button primary" onclick="testLRUWithTTL()">TTLæ”¯æŒ</button>
            <button class="test-button success" onclick="testLRUPerformance()">æ€§èƒ½æµ‹è¯•</button>
            <button class="test-button info" onclick="testLRUStatistics()">ç»Ÿè®¡ä¿¡æ¯</button>
            
            <div class="result" id="lru-result"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ” ç±»å‹æ£€æµ‹</h2>
            <p>æ¼”ç¤ºå®Œæ•´çš„JavaScriptç±»å‹æ£€æµ‹ç³»ç»Ÿ</p>
            
            <button class="test-button" onclick="testTypeDetection()">åŸºç¡€ç±»å‹æ£€æµ‹</button>
            <button class="test-button primary" onclick="testAdvancedTypes()">é«˜çº§ç±»å‹æ£€æµ‹</button>
            <button class="test-button success" onclick="testTypeValidator()">ç±»å‹éªŒè¯å™¨</button>
            <button class="test-button info" onclick="testCustomTypes()">è‡ªå®šä¹‰ç±»å‹</button>
            
            <div class="result" id="type-result"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ“„ JSONè§£æå™¨</h2>
            <p>æ¼”ç¤ºJSONå­—ç¬¦ä¸²è§£æå’Œåºåˆ—åŒ–çš„å®ç°</p>
            
            <button class="test-button" onclick="testJSONStringify()">JSONåºåˆ—åŒ–</button>
            <button class="test-button primary" onclick="testJSONParse()">JSONè§£æ</button>
            <button class="test-button success" onclick="testJSONEdgeCases()">è¾¹ç•Œæƒ…å†µ</button>
            <button class="test-button info" onclick="testJSONPerformance()">æ€§èƒ½å¯¹æ¯”</button>
            
            <div class="result" id="json-result"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ‘€ è§‚å¯Ÿè€…æ¨¡å¼</h2>
            <p>æ¼”ç¤ºè§‚å¯Ÿè€…æ¨¡å¼å’Œå“åº”å¼ç¼–ç¨‹</p>
            
            <button class="test-button" onclick="testObserverBasic()">åŸºç¡€è§‚å¯Ÿè€…</button>
            <button class="test-button primary" onclick="testConditionalNotify()">æ¡ä»¶é€šçŸ¥</button>
            <button class="test-button success" onclick="testReactiveSystem()">å“åº”å¼ç³»ç»Ÿ</button>
            <button class="test-button info" onclick="testObserverChain()">è§‚å¯Ÿè€…é“¾</button>
            
            <div class="result" id="observer-result"></div>
        </div>
    </div>

    <script src="../vanilla-js/curry.js"></script>
    <script src="../vanilla-js/event-emitter.js"></script>
    <script src="../vanilla-js/lru-cache.js"></script>
    <script src="../vanilla-js/type-check.js"></script>
    <script src="../vanilla-js/json-parser.js"></script>
    <script src="../vanilla-js/observer-pattern.js"></script>
    
    <script>
        // æµ‹è¯•åŸºç¡€æŸ¯é‡ŒåŒ–
        function testBasicCurry() {
            const result = document.getElementById('curry-result');
            
            // æµ‹è¯•åŸºç¡€å‡½æ•°
            function add(a, b, c) {
                return a + b + c;
            }
            
            function multiply(a, b, c, d) {
                return a * b * c * d;
            }
            
            result.textContent = 'ğŸ› åŸºç¡€æŸ¯é‡ŒåŒ–æµ‹è¯•:\n\n';
            
            // æµ‹è¯•addå‡½æ•°æŸ¯é‡ŒåŒ–
            const curriedAdd = curry(add);
            
            result.textContent += 'åŠ æ³•å‡½æ•°æµ‹è¯•:\n';
            result.textContent += `åŸå‡½æ•°: add(1, 2, 3) = ${add(1, 2, 3)}\n`;
            result.textContent += `æŸ¯é‡ŒåŒ–: curry(add)(1)(2)(3) = ${curriedAdd(1)(2)(3)}\n`;
            result.textContent += `éƒ¨åˆ†åº”ç”¨: curry(add)(1, 2)(3) = ${curriedAdd(1, 2)(3)}\n`;
            result.textContent += `å…¨éƒ¨åº”ç”¨: curry(add)(1, 2, 3) = ${curriedAdd(1, 2, 3)}\n\n`;
            
            // æµ‹è¯•multiplyå‡½æ•°æŸ¯é‡ŒåŒ–
            const curriedMultiply = curry(multiply);
            
            result.textContent += 'ä¹˜æ³•å‡½æ•°æµ‹è¯•:\n';
            result.textContent += `åŸå‡½æ•°: multiply(2, 3, 4, 5) = ${multiply(2, 3, 4, 5)}\n`;
            result.textContent += `æŸ¯é‡ŒåŒ–: curry(multiply)(2)(3)(4)(5) = ${curriedMultiply(2)(3)(4)(5)}\n`;
            
            // ä¿å­˜éƒ¨åˆ†åº”ç”¨çš„å‡½æ•°
            const multiplyBy2 = curriedMultiply(2);
            const multiplyBy2And3 = multiplyBy2(3);
            
            result.textContent += `éƒ¨åˆ†åº”ç”¨: multiplyBy2(3)(4)(5) = ${multiplyBy2(3)(4)(5)}\n`;
            result.textContent += `é“¾å¼è°ƒç”¨: multiplyBy2And3(4)(5) = ${multiplyBy2And3(4)(5)}\n`;
        }
        
        // æµ‹è¯•å ä½ç¬¦æŸ¯é‡ŒåŒ–
        function testCurryWithPlaceholder() {
            const result = document.getElementById('curry-result');
            
            function subtract(a, b, c) {
                return a - b - c;
            }
            
            const curriedSubtract = curryWithPlaceholder(subtract);
            const _ = curryWithPlaceholder.placeholder || '_';
            
            result.textContent = 'ğŸ¯ å ä½ç¬¦æŸ¯é‡ŒåŒ–æµ‹è¯•:\n\n';
            
            result.textContent += `åŸå‡½æ•°: subtract(10, 3, 2) = ${subtract(10, 3, 2)}\n`;
            result.textContent += `å ä½ç¬¦: curry(subtract)(_, 3, _)(10)(2) = ${curriedSubtract(_, 3, _)(10)(2)}\n`;
            result.textContent += `å¤šå ä½ç¬¦: curry(subtract)(_, _, 2)(10)(3) = ${curriedSubtract(_, _, 2)(10)(3)}\n`;
            
            // å¤æ‚å ä½ç¬¦ç¤ºä¾‹
            const partialSub = curriedSubtract(_, 5, _);
            result.textContent += `ä¿å­˜æ¨¡æ¿: partialSub(20)(3) = ${partialSub(20)(3)}\n`;
            result.textContent += `             partialSub(15)(1) = ${partialSub(15)(1)}\n`;
        }
        
        // æµ‹è¯•æ— é™æŸ¯é‡ŒåŒ–
        function testInfiniteCurry() {
            const result = document.getElementById('curry-result');
            
            result.textContent = 'â™¾ï¸ æ— é™æŸ¯é‡ŒåŒ–æµ‹è¯•:\n\n';
            
            const sum = curryInfinite((args) => args.reduce((a, b) => a + b, 0));
            
            result.textContent += `sum(1)(2)(3)() = ${sum(1)(2)(3)()}\n`;
            result.textContent += `sum(1, 2)(3, 4)(5)() = ${sum(1, 2)(3, 4)(5)()}\n`;
            result.textContent += `sum(1)(2)(3)(4)(5)(6)() = ${sum(1)(2)(3)(4)(5)(6)()}\n\n`;
            
            // é“¾å¼è®¡ç®—
            const calculator = curryInfinite((args) => {
                let result = args[0];
                for (let i = 1; i < args.length; i += 2) {
                    const operator = args[i];
                    const operand = args[i + 1];
                    if (operator === '+') result += operand;
                    else if (operator === '-') result -= operand;
                    else if (operator === '*') result *= operand;
                    else if (operator === '/') result /= operand;
                }
                return result;
            });
            
            result.textContent += `è®¡ç®—å™¨ç¤ºä¾‹:\n`;
            result.textContent += `calc(10)('+')(5)('-')(3)('*')(2)() = ${calculator(10)('+')(5)('-')(3)('*')(2)()}\n`;
        }
        
        // æµ‹è¯•å‘å¸ƒè®¢é˜…åŸºç¡€åŠŸèƒ½
        function testBasicPubSub() {
            const result = document.getElementById('pubsub-result');
            const emitter = new EventEmitter();
            
            result.textContent = 'ğŸ“¡ åŸºç¡€å‘å¸ƒè®¢é˜…æµ‹è¯•:\n\n';
            
            // æ·»åŠ ç›‘å¬å™¨
            emitter.on('test', (data) => {
                result.textContent += `ç›‘å¬å™¨1æ”¶åˆ°: ${data}\n`;
            });
            
            emitter.on('test', (data) => {
                result.textContent += `ç›‘å¬å™¨2æ”¶åˆ°: ${data}\n`;
            });
            
            // è§¦å‘äº‹ä»¶
            result.textContent += 'å‘é€äº‹ä»¶: "Hello World"\n';
            emitter.emit('test', 'Hello World');
            
            result.textContent += '\næ·»åŠ ä¸€æ¬¡æ€§ç›‘å¬å™¨:\n';
            emitter.once('once-test', (data) => {
                result.textContent += `ä¸€æ¬¡æ€§ç›‘å¬å™¨: ${data}\n`;
            });
            
            result.textContent += 'ç¬¬ä¸€æ¬¡è§¦å‘:\n';
            emitter.emit('once-test', 'ç¬¬ä¸€æ¬¡');
            
            result.textContent += 'ç¬¬äºŒæ¬¡è§¦å‘:\n';
            emitter.emit('once-test', 'ç¬¬äºŒæ¬¡');
            
            result.textContent += '(ä¸€æ¬¡æ€§ç›‘å¬å™¨ä¸ä¼šå“åº”ç¬¬äºŒæ¬¡)\n';
        }
        
        // æµ‹è¯•LRUåŸºç¡€åŠŸèƒ½
        function testLRUBasic() {
            const result = document.getElementById('lru-result');
            const cache = new LRUCacheMap(3); // å®¹é‡ä¸º3
            
            result.textContent = 'ğŸ’¾ LRUç¼“å­˜åŸºç¡€æµ‹è¯•:\n\n';
            
            // æ·»åŠ æ•°æ®
            cache.set('a', 1);
            cache.set('b', 2);
            cache.set('c', 3);
            
            result.textContent += 'æ·»åŠ æ•°æ®: a=1, b=2, c=3\n';
            result.textContent += `ç¼“å­˜å¤§å°: ${cache.size}\n`;
            result.textContent += `è·å–a: ${cache.get('a')}\n`;
            
            // æ·»åŠ æ–°æ•°æ®ï¼Œåº”è¯¥æ·˜æ±°æœ€å°‘ä½¿ç”¨çš„
            cache.set('d', 4);
            
            result.textContent += '\næ·»åŠ æ•°æ®: d=4 (å®¹é‡å·²æ»¡ï¼Œåº”æ·˜æ±°b)\n';
            result.textContent += `è·å–b: ${cache.get('b')} (åº”è¯¥æ˜¯undefined)\n`;
            result.textContent += `è·å–c: ${cache.get('c')}\n`;
            result.textContent += `è·å–d: ${cache.get('d')}\n`;
            
            // æ˜¾ç¤ºå½“å‰æ‰€æœ‰é”®
            result.textContent += `\nå½“å‰æ‰€æœ‰é”®: [${cache.keys().join(', ')}]\n`;
            
            // æµ‹è¯•åˆ é™¤
            cache.delete('a');
            result.textContent += `åˆ é™¤aåå¤§å°: ${cache.size}\n`;
            
            // æ¸…ç©º
            cache.clear();
            result.textContent += `æ¸…ç©ºåå¤§å°: ${cache.size}\n`;
        }
        
        // æµ‹è¯•ç±»å‹æ£€æµ‹
        function testTypeDetection() {
            const result = document.getElementById('type-result');
            
            const testValues = [
                42,
                'hello',
                true,
                null,
                undefined,
                [],
                {},
                new Date(),
                /regex/,
                function() {},
                () => {},
                Symbol('test'),
                new Map(),
                new Set(),
                new Error('test'),
                document.createElement('div')
            ];
            
            result.textContent = 'ğŸ” ç±»å‹æ£€æµ‹æµ‹è¯•:\n\n';
            
            testValues.forEach(value => {
                const type = getTypeComplete(value);
                const jsType = typeof value;
                
                result.textContent += `${String(value).slice(0, 20).padEnd(20)} | typeof: ${jsType.padEnd(8)} | æ£€æµ‹: ${type}\n`;
            });
            
            result.textContent += '\né«˜çº§ç±»å‹æ£€æµ‹:\n';
            result.textContent += `ç©ºå¯¹è±¡: ${TypeChecker.isPlainObject({})}\n`;
            result.textContent += `æ•°ç»„å¯¹è±¡: ${TypeChecker.isPlainObject([])}\n`;
            result.textContent += `ç©ºæ•°ç»„: ${TypeChecker.isEmpty([])}\n`;
            result.textContent += `ç©ºå­—ç¬¦ä¸²: ${TypeChecker.isEmpty('')}\n`;
            result.textContent += `Promise: ${TypeChecker.isPromise(Promise.resolve())}\n`;
            result.textContent += `ç±»æ•°ç»„: ${TypeChecker.isArrayLike({length: 3})}\n`;
        }
        
        // æµ‹è¯•JSONåºåˆ—åŒ–
        function testJSONStringify() {
            const result = document.getElementById('json-result');
            
            const testObject = {
                string: 'hello',
                number: 42,
                boolean: true,
                null: null,
                undefined: undefined,
                array: [1, 2, 3],
                object: { nested: 'value' },
                func: function() { return 'test'; },
                date: new Date('2023-01-01'),
                regexp: /test/g,
                symbol: Symbol('test')
            };
            
            result.textContent = 'JSONåºåˆ—åŒ–æµ‹è¯•:\n\n';
            
            try {
                const native = JSON.stringify(testObject, null, 2);
                const custom = myStringify(testObject, null, 2);
                
                result.textContent += 'åŸç”ŸJSON.stringify:\n';
                result.textContent += native + '\n\n';
                
                result.textContent += 'è‡ªå®ç°myStringify:\n';
                result.textContent += custom + '\n\n';
                
                result.textContent += `ç»“æœä¸€è‡´: ${native === custom ? 'âœ…' : 'âŒ'}\n`;
            } catch (error) {
                result.textContent += `âŒ æµ‹è¯•å¤±è´¥: ${error.message}\n`;
            }
        }
        
        // æµ‹è¯•è§‚å¯Ÿè€…æ¨¡å¼
        function testObserverBasic() {
            const result = document.getElementById('observer-result');
            
            const subject = new Subject();
            
            result.textContent = 'ğŸ‘€ è§‚å¯Ÿè€…æ¨¡å¼æµ‹è¯•:\n\n';
            
            // åˆ›å»ºè§‚å¯Ÿè€…
            const observer1 = new Observer('è§‚å¯Ÿè€…1', (data) => {
                result.textContent += `è§‚å¯Ÿè€…1æ”¶åˆ°é€šçŸ¥: ${data}\n`;
            });
            
            const observer2 = new Observer('è§‚å¯Ÿè€…2', (data) => {
                result.textContent += `è§‚å¯Ÿè€…2æ”¶åˆ°é€šçŸ¥: ${data}\n`;
            });
            
            // è®¢é˜…
            subject.subscribe(observer1);
            subject.subscribe(observer2);
            
            result.textContent += `å½“å‰è§‚å¯Ÿè€…æ•°é‡: ${subject.observers.length}\n\n`;
            
            // é€šçŸ¥
            result.textContent += 'å‘é€é€šçŸ¥: "æµ‹è¯•æ¶ˆæ¯"\n';
            subject.notify('æµ‹è¯•æ¶ˆæ¯');
            
            result.textContent += '\nå–æ¶ˆè§‚å¯Ÿè€…1çš„è®¢é˜…\n';
            subject.unsubscribe(observer1);
            
            result.textContent += 'å†æ¬¡å‘é€é€šçŸ¥: "ç¬¬äºŒæ¡æ¶ˆæ¯"\n';
            subject.notify('ç¬¬äºŒæ¡æ¶ˆæ¯');
        }
        
        // å…¶ä»–ç®€åŒ–çš„æµ‹è¯•å‡½æ•°
        function testCurryApplication() {
            const result = document.getElementById('curry-result');
            
            // å®é™…åº”ç”¨ç¤ºä¾‹
            const map = curry((fn, arr) => arr.map(fn));
            const filter = curry((fn, arr) => arr.filter(fn));
            
            const numbers = [1, 2, 3, 4, 5];
            
            const double = x => x * 2;
            const isEven = x => x % 2 === 0;
            
            result.textContent = 'ğŸš€ æŸ¯é‡ŒåŒ–å®é™…åº”ç”¨:\n\n';
            result.textContent += `åŸæ•°ç»„: [${numbers.join(', ')}]\n`;
            result.textContent += `æ˜ å°„åŠ å€: [${map(double)(numbers).join(', ')}]\n`;
            result.textContent += `è¿‡æ»¤å¶æ•°: [${filter(isEven)(numbers).join(', ')}]\n`;
            
            // å‡½æ•°ç»„åˆ
            const doubleEvens = (arr) => map(double)(filter(isEven)(arr));
            result.textContent += `ç»„åˆæ“ä½œ: [${doubleEvens(numbers).join(', ')}]\n`;
        }
        
        function testEventPriority() {
            const result = document.getElementById('pubsub-result');
            result.textContent = 'ğŸ“¡ äº‹ä»¶ä¼˜å…ˆçº§åŠŸèƒ½éœ€è¦EventEmitteræ”¯æŒpriorityå‚æ•°\n';
            result.textContent += 'è¿™æ˜¯ä¸€ä¸ªé«˜çº§åŠŸèƒ½çš„æ¼”ç¤ºå ä½ç¬¦\n';
        }
        
        function testLRUWithTTL() {
            const result = document.getElementById('lru-result');
            result.textContent = 'â° TTL(ç”Ÿå­˜æ—¶é—´)åŠŸèƒ½æ¼”ç¤º\n';
            result.textContent += 'è¿™éœ€è¦LRUç¼“å­˜æ”¯æŒè¿‡æœŸæ—¶é—´åŠŸèƒ½\n';
        }
        
        function testAdvancedTypes() {
            const result = document.getElementById('type-result');
            
            // æµ‹è¯•å¤æ‚ç±»å‹æ£€æµ‹
            const validator = new TypeValidator();
            
            result.textContent = 'ğŸ”¬ é«˜çº§ç±»å‹æ£€æµ‹:\n\n';
            
            // å®šä¹‰éªŒè¯è§„åˆ™
            const userSchema = {
                name: 'string',
                age: 'number',
                email: 'string',
                active: 'boolean'
            };
            
            const testUser = {
                name: 'John',
                age: 30,
                email: 'john@example.com',
                active: true
            };
            
            const invalidUser = {
                name: 'Jane',
                age: '25',  // é”™è¯¯ç±»å‹
                email: 'jane@example.com',
                active: 'yes'  // é”™è¯¯ç±»å‹
            };
            
            result.textContent += 'éªŒè¯æœ‰æ•ˆç”¨æˆ·:\n';
            try {
                const valid = validator.validate(testUser, userSchema);
                result.textContent += `ç»“æœ: ${valid ? 'âœ… æœ‰æ•ˆ' : 'âŒ æ— æ•ˆ'}\n`;
            } catch (error) {
                result.textContent += `âŒ éªŒè¯å¤±è´¥: ${error.message}\n`;
            }
            
            result.textContent += '\néªŒè¯æ— æ•ˆç”¨æˆ·:\n';
            try {
                const valid = validator.validate(invalidUser, userSchema);
                result.textContent += `ç»“æœ: ${valid ? 'âœ… æœ‰æ•ˆ' : 'âŒ æ— æ•ˆ'}\n`;
            } catch (error) {
                result.textContent += `âŒ éªŒè¯å¤±è´¥: ${error.message}\n`;
            }
        }
        
        function testJSONParse() {
            const result = document.getElementById('json-result');
            
            const jsonString = '{"name":"test","value":42,"nested":{"array":[1,2,3]}}';
            
            result.textContent = 'JSONè§£ææµ‹è¯•:\n\n';
            
            try {
                const native = JSON.parse(jsonString);
                const custom = myParse(jsonString);
                
                result.textContent += `åŸç”Ÿè§£æ: ${JSON.stringify(native)}\n`;
                result.textContent += `è‡ªå®ç°è§£æ: ${JSON.stringify(custom)}\n`;
                result.textContent += `ç»“æœä¸€è‡´: ${JSON.stringify(native) === JSON.stringify(custom) ? 'âœ…' : 'âŒ'}\n`;
            } catch (error) {
                result.textContent += `âŒ è§£æå¤±è´¥: ${error.message}\n`;
            }
        }
        
        function testReactiveSystem() {
            const result = document.getElementById('observer-result');
            result.textContent = 'âš¡ å“åº”å¼ç³»ç»Ÿæ¼”ç¤º\n';
            result.textContent += 'è¿™æ˜¯ä¸€ä¸ªåŸºäºè§‚å¯Ÿè€…æ¨¡å¼çš„å“åº”å¼ç³»ç»Ÿç¤ºä¾‹\n';
            
            // ç®€å•çš„å“åº”å¼å®ç°
            const reactive = (obj) => {
                const observers = new Map();
                
                return new Proxy(obj, {
                    set(target, key, value) {
                        const oldValue = target[key];
                        target[key] = value;
                        
                        if (observers.has(key)) {
                            observers.get(key).forEach(callback => {
                                callback(value, oldValue);
                            });
                        }
                        
                        return true;
                    },
                    
                    get(target, key) {
                        if (key === '$watch') {
                            return (prop, callback) => {
                                if (!observers.has(prop)) {
                                    observers.set(prop, []);
                                }
                                observers.get(prop).push(callback);
                            };
                        }
                        return target[key];
                    }
                });
            };
            
            const data = reactive({ count: 0, name: 'test' });
            
            data.$watch('count', (newVal, oldVal) => {
                result.textContent += `countå˜åŒ–: ${oldVal} -> ${newVal}\n`;
            });
            
            result.textContent += '\nå¼€å§‹æµ‹è¯•å“åº”å¼:\n';
            data.count = 1;
            data.count = 2;
            data.name = 'updated';
        }
        
        // é¡µé¢åŠ è½½æç¤º
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ å·¥å…·å‡½æ•°åº“æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
            console.log('ğŸ’¡ ç‚¹å‡»æµ‹è¯•æŒ‰é’®æŸ¥çœ‹å„ç§å·¥å…·å‡½æ•°çš„å®ç°æ•ˆæœ');
            
            // æ·»åŠ è¯´æ˜
            document.querySelector('.demo-container').insertAdjacentHTML('afterbegin', `
                <div style="background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    <strong>ğŸ’¡ æ¼”ç¤ºè¯´æ˜ï¼š</strong>
                    æœ¬æ¼”ç¤ºæ¶µç›–äº†æŸ¯é‡ŒåŒ–ã€å‘å¸ƒè®¢é˜…ã€LRUç¼“å­˜ã€ç±»å‹æ£€æµ‹ã€JSONè§£æã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰
                    å¸¸ç”¨å·¥å…·å‡½æ•°çš„å®ç°å’Œåº”ç”¨ã€‚è¿™äº›éƒ½æ˜¯å‰ç«¯å¼€å‘ä¸­çš„é‡è¦æŠ€èƒ½ï¼
                </div>
            `);
        });
    </script>
</body>
</html>
