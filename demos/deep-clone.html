<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±æ‹·è´å®ç°æ¼”ç¤º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
        }
        
        .demo-section h2 {
            color: #17a2b8;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }
        
        .test-button:hover {
            background: #138496;
        }
        
        .test-button.danger {
            background: #dc3545;
        }
        
        .test-button.danger:hover {
            background: #c82333;
        }
        
        .result {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .json-viewer {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            overflow-x: auto;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        
        .comparison-item h3 {
            margin: 0 0 10px 0;
            color: #495057;
        }
        
        .performance-test {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .performance-result {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .performance-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #ffeaa7;
        }
        
        .performance-value {
            font-size: 18px;
            font-weight: bold;
            color: #856404;
        }
        
        .performance-label {
            font-size: 12px;
            color: #856404;
        }
        
        .back-link {
            display: inline-block;
            color: #007bff;
            text-decoration: none;
            margin-bottom: 20px;
            padding: 8px 15px;
            border: 1px solid #007bff;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .back-link:hover {
            background: #007bff;
            color: white;
        }
        
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
    
    <div class="demo-container">
        <h1>ğŸ”„ æ·±æ‹·è´å®ç°æ¼”ç¤º</h1>
        
        <div class="demo-section">
            <h2>ğŸ“‹ åŸºç¡€æ·±æ‹·è´æµ‹è¯•</h2>
            <p>æµ‹è¯•åŸºæœ¬çš„å¯¹è±¡å’Œæ•°ç»„æ·±æ‹·è´åŠŸèƒ½</p>
            
            <button class="test-button" onclick="testBasicClone()">æµ‹è¯•åŸºç¡€æ·±æ‹·è´</button>
            <button class="test-button" onclick="testComplexObject()">æµ‹è¯•å¤æ‚å¯¹è±¡</button>
            <button class="test-button danger" onclick="testCircularReference()">æµ‹è¯•å¾ªç¯å¼•ç”¨</button>
            
            <div class="result" id="basic-result"></div>
            
            <div class="comparison" id="basic-comparison" style="display: none;">
                <div class="comparison-item">
                    <h3>ğŸ”— åŸå¯¹è±¡</h3>
                    <div class="json-viewer" id="original-object"></div>
                </div>
                <div class="comparison-item">
                    <h3>ğŸ“ å…‹éš†å¯¹è±¡</h3>
                    <div class="json-viewer" id="cloned-object"></div>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ—ï¸ ç‰¹æ®Šç±»å‹å¤„ç†</h2>
            <p>æµ‹è¯•Dateã€RegExpã€Setã€Mapã€Symbolç­‰ç‰¹æ®Šç±»å‹</p>
            
            <button class="test-button" onclick="testSpecialTypes()">æµ‹è¯•ç‰¹æ®Šç±»å‹</button>
            <button class="test-button" onclick="testDateRegExp()">æµ‹è¯•Dateå’Œæ­£åˆ™</button>
            <button class="test-button" onclick="testSetMap()">æµ‹è¯•Setå’ŒMap</button>
            
            <div class="result" id="special-result"></div>
        </div>
        
        <div class="demo-section">
            <h2>âš¡ æ€§èƒ½å¯¹æ¯”æµ‹è¯•</h2>
            <p>å¯¹æ¯”ä¸åŒæ·±æ‹·è´æ–¹æ³•çš„æ€§èƒ½è¡¨ç°</p>
            
            <button class="test-button" onclick="runPerformanceTest()">è¿è¡Œæ€§èƒ½æµ‹è¯•</button>
            
            <div class="performance-test">
                <div class="performance-result" id="performance-results"></div>
            </div>
            
            <div class="result" id="performance-detail"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ§ª è¾¹ç•Œæƒ…å†µæµ‹è¯•</h2>
            <p>æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸å¤„ç†</p>
            
            <button class="test-button" onclick="testBoundaryCases()">æµ‹è¯•è¾¹ç•Œæƒ…å†µ</button>
            <button class="test-button" onclick="testNullUndefined()">æµ‹è¯•null/undefined</button>
            <button class="test-button" onclick="testPrimitives()">æµ‹è¯•åŸºæœ¬ç±»å‹</button>
            
            <div class="result" id="boundary-result"></div>
        </div>
    </div>

    <script src="../vanilla-js/deep-clone.js"></script>
    
    <script>
        // åˆ›å»ºæµ‹è¯•ç”¨çš„å¤æ‚å¯¹è±¡
        function createComplexObject() {
            const now = new Date();
            const regex = /test\d+/gi;
            const map = new Map([['key1', 'value1'], ['key2', 'value2']]);
            const set = new Set([1, 2, 3, 'test']);
            const symbol = Symbol('test');
            
            return {
                string: 'Hello World',
                number: 42,
                boolean: true,
                nullValue: null,
                undefinedValue: undefined,
                date: now,
                regexp: regex,
                array: [1, 2, [3, 4, { nested: 'value' }]],
                map: map,
                set: set,
                symbolKey: symbol,
                [symbol]: 'symbol value',
                nested: {
                    deep: {
                        deeper: {
                            value: 'deep value',
                            date: new Date('2023-01-01'),
                            func: function() { return 'function'; }
                        }
                    }
                },
                func: () => 'arrow function',
                asyncFunc: async () => 'async function'
            };
        }
        
        // æµ‹è¯•åŸºç¡€æ·±æ‹·è´
        function testBasicClone() {
            const result = document.getElementById('basic-result');
            const comparison = document.getElementById('basic-comparison');
            
            try {
                const original = {
                    name: 'John',
                    age: 30,
                    hobbies: ['reading', 'coding'],
                    address: {
                        city: 'Beijing',
                        country: 'China'
                    }
                };
                
                const cloned = deepClone(original);
                
                // ä¿®æ”¹å…‹éš†å¯¹è±¡
                cloned.name = 'Jane';
                cloned.hobbies.push('swimming');
                cloned.address.city = 'Shanghai';
                
                // æ£€æŸ¥ç‹¬ç«‹æ€§
                const isIndependent = 
                    original.name !== cloned.name &&
                    original.hobbies.length !== cloned.hobbies.length &&
                    original.address.city !== cloned.address.city;
                
                result.textContent = `âœ… åŸºç¡€æ·±æ‹·è´æµ‹è¯•æˆåŠŸï¼
                
ç‹¬ç«‹æ€§æ£€æŸ¥: ${isIndependent ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}

åŸå¯¹è±¡ name: ${original.name}
å…‹éš†å¯¹è±¡ name: ${cloned.name}

åŸå¯¹è±¡ hobbies: [${original.hobbies.join(', ')}]
å…‹éš†å¯¹è±¡ hobbies: [${cloned.hobbies.join(', ')}]

åŸå¯¹è±¡ city: ${original.address.city}
å…‹éš†å¯¹è±¡ city: ${cloned.address.city}`;
                
                // æ˜¾ç¤ºå¯¹æ¯”
                document.getElementById('original-object').textContent = JSON.stringify(original, null, 2);
                document.getElementById('cloned-object').textContent = JSON.stringify(cloned, null, 2);
                comparison.style.display = 'grid';
                
            } catch (error) {
                result.textContent = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
                comparison.style.display = 'none';
            }
        }
        
        // æµ‹è¯•å¤æ‚å¯¹è±¡
        function testComplexObject() {
            const result = document.getElementById('basic-result');
            
            try {
                const original = createComplexObject();
                const cloned = advancedDeepClone(original);
                
                // æµ‹è¯•å„ç§ç±»å‹
                const tests = [
                    {
                        name: 'Dateç±»å‹',
                        test: () => cloned.date instanceof Date && cloned.date.getTime() === original.date.getTime()
                    },
                    {
                        name: 'RegExpç±»å‹',
                        test: () => cloned.regexp instanceof RegExp && cloned.regexp.toString() === original.regexp.toString()
                    },
                    {
                        name: 'Mapç±»å‹',
                        test: () => cloned.map instanceof Map && cloned.map.size === original.map.size
                    },
                    {
                        name: 'Setç±»å‹',
                        test: () => cloned.set instanceof Set && cloned.set.size === original.set.size
                    },
                    {
                        name: 'åµŒå¥—å¯¹è±¡',
                        test: () => cloned.nested.deep.deeper.value === original.nested.deep.deeper.value
                    },
                    {
                        name: 'æ•°ç»„åµŒå¥—',
                        test: () => Array.isArray(cloned.array) && cloned.array[2][2].nested === 'value'
                    }
                ];
                
                const results = tests.map(test => ({
                    name: test.name,
                    passed: test.test()
                }));
                
                const passedCount = results.filter(r => r.passed).length;
                
                result.textContent = `ğŸ—ï¸ å¤æ‚å¯¹è±¡æµ‹è¯•ç»“æœ (${passedCount}/${results.length} é€šè¿‡)
                
${results.map(r => `${r.passed ? 'âœ…' : 'âŒ'} ${r.name}`).join('\n')}

å¯¹è±¡ç±»å‹æ£€æŸ¥:
- Date: ${cloned.date instanceof Date ? 'âœ…' : 'âŒ'}
- RegExp: ${cloned.regexp instanceof RegExp ? 'âœ…' : 'âŒ'}
- Map: ${cloned.map instanceof Map ? 'âœ…' : 'âŒ'}
- Set: ${cloned.set instanceof Set ? 'âœ…' : 'âŒ'}
- Array: ${Array.isArray(cloned.array) ? 'âœ…' : 'âŒ'}`;
                
            } catch (error) {
                result.textContent = `âŒ å¤æ‚å¯¹è±¡æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        // æµ‹è¯•å¾ªç¯å¼•ç”¨
        function testCircularReference() {
            const result = document.getElementById('basic-result');
            
            try {
                // åˆ›å»ºå¾ªç¯å¼•ç”¨å¯¹è±¡
                const original = {
                    name: 'parent',
                    child: {
                        name: 'child',
                        parent: null
                    }
                };
                original.child.parent = original;
                original.self = original;
                
                const cloned = deepClone(original);
                
                // æ£€æŸ¥å¾ªç¯å¼•ç”¨æ˜¯å¦æ­£ç¡®å¤„ç†
                const tests = [
                    cloned.child.parent === cloned,
                    cloned.self === cloned,
                    cloned.child.parent.name === 'parent',
                    cloned !== original,
                    cloned.child !== original.child
                ];
                
                const allPassed = tests.every(t => t);
                
                result.textContent = `ğŸ”„ å¾ªç¯å¼•ç”¨æµ‹è¯•: ${allPassed ? 'âœ… æˆåŠŸ' : 'âŒ å¤±è´¥'}
                
æ£€æŸ¥é¡¹ç›®:
âœ… å…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡ä¸åŒ
âœ… å­å¯¹è±¡ä¸åŸå­å¯¹è±¡ä¸åŒ  
âœ… å¾ªç¯å¼•ç”¨æ­£ç¡®ç»´æŠ¤
âœ… å¯¹è±¡å±æ€§å€¼æ­£ç¡®
âœ… é¿å…æ— é™é€’å½’

å¾ªç¯å¼•ç”¨éªŒè¯:
- cloned.child.parent === cloned: ${cloned.child.parent === cloned}
- cloned.self === cloned: ${cloned.self === cloned}
- cloned !== original: ${cloned !== original}`;
                
            } catch (error) {
                result.textContent = `âŒ å¾ªç¯å¼•ç”¨æµ‹è¯•å¤±è´¥: ${error.message}
                
è¿™å¯èƒ½æ˜¯å› ä¸º:
1. æ²¡æœ‰å¤„ç†å¾ªç¯å¼•ç”¨
2. é™·å…¥æ— é™é€’å½’
3. WeakMap æœªæ­£ç¡®ä½¿ç”¨`;
            }
        }
        
        // æµ‹è¯•ç‰¹æ®Šç±»å‹
        function testSpecialTypes() {
            const result = document.getElementById('special-result');
            
            try {
                const now = new Date();
                const regex = /test\d+/gi;
                const buffer = new ArrayBuffer(8);
                const view = new Int32Array(buffer);
                view[0] = 42;
                
                const original = {
                    date: now,
                    regexp: regex,
                    error: new Error('test error'),
                    buffer: buffer,
                    view: view,
                    func: function(x) { return x * 2; },
                    arrow: (x) => x * 3,
                    async: async (x) => x * 4
                };
                
                const cloned = advancedDeepClone(original);
                
                result.textContent = `ğŸ¯ ç‰¹æ®Šç±»å‹æµ‹è¯•ç»“æœ:
                
âœ… Date: ${cloned.date instanceof Date && cloned.date.getTime() === now.getTime()}
âœ… RegExp: ${cloned.regexp instanceof RegExp && cloned.regexp.source === regex.source}
âœ… Error: ${cloned.error instanceof Error && cloned.error.message === 'test error'}
âœ… ArrayBuffer: ${cloned.buffer instanceof ArrayBuffer}
âœ… TypedArray: ${cloned.view instanceof Int32Array}
âš ï¸  Function: ${typeof cloned.func === 'function'} (å‡½æ•°æ— æ³•å®Œå…¨å…‹éš†)

è¯¦ç»†ä¿¡æ¯:
- åŸå§‹ Date: ${now.toISOString()}
- å…‹éš† Date: ${cloned.date.toISOString()}
- åŸå§‹ RegExp: ${regex.toString()}
- å…‹éš† RegExp: ${cloned.regexp.toString()}
- åŸå§‹ Error: ${original.error.message}
- å…‹éš† Error: ${cloned.error.message}`;
                
            } catch (error) {
                result.textContent = `âŒ ç‰¹æ®Šç±»å‹æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        // æµ‹è¯•Dateå’Œæ­£åˆ™
        function testDateRegExp() {
            const result = document.getElementById('special-result');
            
            try {
                const original = {
                    birthday: new Date('1990-01-01'),
                    created: new Date(),
                    emailRegex: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
                    phoneRegex: /^1[3-9]\d{9}$/g,
                    multiFlag: /test/gim
                };
                
                const cloned = advancedDeepClone(original);
                
                result.textContent = `ğŸ“… Date & RegExp æµ‹è¯•:
                
Date æµ‹è¯•:
âœ… birthday: ${cloned.birthday instanceof Date}
   åŸå§‹: ${original.birthday.toDateString()}
   å…‹éš†: ${cloned.birthday.toDateString()}
   ç›¸ç­‰: ${original.birthday.getTime() === cloned.birthday.getTime()}

âœ… created: ${cloned.created instanceof Date}
   æ—¶é—´å·®: ${Math.abs(cloned.created.getTime() - original.created.getTime())}ms

RegExp æµ‹è¯•:
âœ… emailRegex: ${cloned.emailRegex instanceof RegExp}
   æºç : ${cloned.emailRegex.source === original.emailRegex.source}
   æ ‡å¿—: ${cloned.emailRegex.flags === original.emailRegex.flags}

âœ… phoneRegex: ${cloned.phoneRegex instanceof RegExp}
   global: ${cloned.phoneRegex.global === original.phoneRegex.global}

âœ… multiFlag: ${cloned.multiFlag instanceof RegExp}
   flags: ${cloned.multiFlag.flags} === ${original.multiFlag.flags}`;
                
            } catch (error) {
                result.textContent = `âŒ Date & RegExp æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        // æµ‹è¯•Setå’ŒMap
        function testSetMap() {
            const result = document.getElementById('special-result');
            
            try {
                const map = new Map([
                    ['string', 'value'],
                    [42, 'number key'],
                    [true, 'boolean key'],
                    [{key: 'object'}, 'object key']
                ]);
                
                const set = new Set([
                    'string',
                    42,
                    true,
                    {id: 1},
                    [1, 2, 3]
                ]);
                
                const original = { map, set };
                const cloned = advancedDeepClone(original);
                
                result.textContent = `ğŸ—ºï¸ Set & Map æµ‹è¯•:
                
Map æµ‹è¯•:
âœ… ç±»å‹: ${cloned.map instanceof Map}
âœ… å¤§å°: ${cloned.map.size === original.map.size}
âœ… å­—ç¬¦ä¸²é”®: ${cloned.map.get('string') === 'value'}
âœ… æ•°å­—é”®: ${cloned.map.get(42) === 'number key'}
âœ… å¸ƒå°”é”®: ${cloned.map.get(true) === 'boolean key'}

Map å†…å®¹:
${Array.from(cloned.map.entries()).map(([k, v]) => `  ${JSON.stringify(k)} => ${JSON.stringify(v)}`).join('\n')}

Set æµ‹è¯•:
âœ… ç±»å‹: ${cloned.set instanceof Set}
âœ… å¤§å°: ${cloned.set.size === original.set.size}
âœ… åŒ…å«å­—ç¬¦ä¸²: ${cloned.set.has('string')}
âœ… åŒ…å«æ•°å­—: ${cloned.set.has(42)}
âœ… åŒ…å«å¸ƒå°”: ${cloned.set.has(true)}

Set å†…å®¹:
${Array.from(cloned.set).map(v => `  ${JSON.stringify(v)}`).join('\n')}`;
                
            } catch (error) {
                result.textContent = `âŒ Set & Map æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        // æ€§èƒ½æµ‹è¯•
        function runPerformanceTest() {
            const resultsDiv = document.getElementById('performance-results');
            const detailDiv = document.getElementById('performance-detail');
            
            const testObject = createLargeObject();
            const iterations = 1000;
            
            // æµ‹è¯•ä¸åŒæ–¹æ³•çš„æ€§èƒ½
            const methods = [
                {
                    name: 'JSONæ–¹æ³•',
                    func: (obj) => JSON.parse(JSON.stringify(obj)),
                    note: 'æ— æ³•å¤„ç†å‡½æ•°ã€Symbolç­‰'
                },
                {
                    name: 'ç®€å•æ·±æ‹·è´',
                    func: (obj) => simpleDeepClone(obj),
                    note: 'åŸºç¡€å®ç°'
                },
                {
                    name: 'æ ‡å‡†æ·±æ‹·è´',
                    func: (obj) => deepClone(obj),
                    note: 'å¤„ç†å¾ªç¯å¼•ç”¨'
                },
                {
                    name: 'é«˜çº§æ·±æ‹·è´',
                    func: (obj) => advancedDeepClone(obj),
                    note: 'å¤„ç†æ‰€æœ‰ç±»å‹'
                }
            ];
            
            const results = methods.map(method => {
                const start = performance.now();
                
                try {
                    for (let i = 0; i < iterations; i++) {
                        method.func(testObject);
                    }
                    const time = performance.now() - start;
                    return { ...method, time, success: true };
                } catch (error) {
                    return { ...method, time: 0, success: false, error: error.message };
                }
            });
            
            // æ˜¾ç¤ºç»“æœ
            resultsDiv.innerHTML = results.map(result => `
                <div class="performance-item">
                    <div class="performance-value">${result.success ? Math.round(result.time) + 'ms' : 'Error'}</div>
                    <div class="performance-label">${result.name}</div>
                </div>
            `).join('');
            
            detailDiv.textContent = `âš¡ æ€§èƒ½æµ‹è¯•ç»“æœ (${iterations} æ¬¡è¿­ä»£):

${results.map(result => {
                if (result.success) {
                    return `âœ… ${result.name}: ${Math.round(result.time)}ms (${result.note})`;
                } else {
                    return `âŒ ${result.name}: å¤±è´¥ - ${result.error}`;
                }
            }).join('\n')}

æµ‹è¯•å¯¹è±¡å¤§å°: ${JSON.stringify(testObject).length} å­—ç¬¦
æœ€å¿«æ–¹æ³•: ${results.filter(r => r.success).sort((a, b) => a.time - b.time)[0]?.name || 'None'}

ğŸ’¡ æ€§èƒ½åˆ†æ:
- JSONæ–¹æ³•æœ€å¿«ï¼Œä½†åŠŸèƒ½å—é™
- åŠŸèƒ½è¶Šå®Œæ•´ï¼Œæ€§èƒ½å¼€é”€è¶Šå¤§
- å®é™…ä½¿ç”¨éœ€è¦å¹³è¡¡åŠŸèƒ½å’Œæ€§èƒ½`;
        }
        
        // åˆ›å»ºå¤§å¯¹è±¡ç”¨äºæ€§èƒ½æµ‹è¯•
        function createLargeObject() {
            const large = {
                users: [],
                metadata: {
                    created: new Date(),
                    version: '1.0.0'
                }
            };
            
            // åˆ›å»º100ä¸ªç”¨æˆ·
            for (let i = 0; i < 100; i++) {
                large.users.push({
                    id: i,
                    name: `User${i}`,
                    email: `user${i}@example.com`,
                    profile: {
                        age: 20 + Math.floor(Math.random() * 50),
                        interests: ['coding', 'reading', 'gaming'].slice(0, Math.floor(Math.random() * 3) + 1)
                    }
                });
            }
            
            return large;
        }
        
        // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
        function testBoundaryCase() {
            const result = document.getElementById('boundary-result');
            
            try {
                const tests = [
                    { name: 'null', value: null },
                    { name: 'undefined', value: undefined },
                    { name: 'ç©ºå¯¹è±¡', value: {} },
                    { name: 'ç©ºæ•°ç»„', value: [] },
                    { name: '0', value: 0 },
                    { name: 'ç©ºå­—ç¬¦ä¸²', value: '' },
                    { name: 'false', value: false },
                    { name: 'NaN', value: NaN },
                    { name: 'Infinity', value: Infinity },
                    { name: '-Infinity', value: -Infinity }
                ];
                
                const results = tests.map(test => {
                    try {
                        const cloned = deepClone(test.value);
                        const isEqual = Number.isNaN(test.value) ? Number.isNaN(cloned) : cloned === test.value;
                        return { name: test.name, success: true, equal: isEqual, cloned };
                    } catch (error) {
                        return { name: test.name, success: false, error: error.message };
                    }
                });
                
                result.textContent = `ğŸ§ª è¾¹ç•Œæƒ…å†µæµ‹è¯•ç»“æœ:

${results.map(r => {
                    if (r.success) {
                        return `âœ… ${r.name}: ${r.equal ? 'ç›¸ç­‰' : 'ä¸ç­‰'} (${JSON.stringify(r.cloned)})`;
                    } else {
                        return `âŒ ${r.name}: å¤±è´¥ - ${r.error}`;
                    }
                }).join('\n')}

é€šè¿‡ç‡: ${results.filter(r => r.success && r.equal).length}/${results.length}`;
                
            } catch (error) {
                result.textContent = `âŒ è¾¹ç•Œæµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }
        
        // å…¶ä»–æµ‹è¯•å‡½æ•°çš„ç®€åŒ–ç‰ˆæœ¬
        function testBoundaryCase() { testBoundaryCase(); }
        function testNullUndefined() {
            const result = document.getElementById('boundary-result');
            
            const tests = [
                { input: null, expected: null },
                { input: undefined, expected: undefined },
                { input: { a: null, b: undefined }, expected: { a: null, b: undefined } }
            ];
            
            const results = tests.map(test => {
                const cloned = deepClone(test.input);
                return {
                    input: test.input,
                    cloned,
                    equal: JSON.stringify(cloned) === JSON.stringify(test.expected)
                };
            });
            
            result.textContent = `ğŸ” Null/Undefined æµ‹è¯•:
            
${results.map((r, i) => `âœ… æµ‹è¯•${i + 1}: ${r.equal ? 'é€šè¿‡' : 'å¤±è´¥'}
   è¾“å…¥: ${JSON.stringify(r.input)}
   è¾“å‡º: ${JSON.stringify(r.cloned)}`).join('\n')}`;
        }
        
        function testPrimitives() {
            const result = document.getElementById('boundary-result');
            
            const primitives = [
                42,
                'hello',
                true,
                Symbol('test'),
                BigInt(123)
            ];
            
            const results = primitives.map(primitive => {
                const cloned = deepClone(primitive);
                return {
                    type: typeof primitive,
                    value: primitive,
                    cloned,
                    equal: primitive === cloned
                };
            });
            
            result.textContent = `ğŸ¯ åŸºæœ¬ç±»å‹æµ‹è¯•:
            
${results.map(r => `âœ… ${r.type}: ${r.equal ? 'ç›¸ç­‰' : 'ä¸ç­‰'}
   åŸå€¼: ${String(r.value)}
   å…‹éš†: ${String(r.cloned)}`).join('\n')}`;
        }
        
        // é¡µé¢åŠ è½½æç¤º
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”„ æ·±æ‹·è´æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
            console.log('ğŸ’¡ ç‚¹å‡»æµ‹è¯•æŒ‰é’®æŸ¥çœ‹æ·±æ‹·è´çš„å„ç§å®ç°æ•ˆæœ');
            
            // æ·»åŠ æç¤ºä¿¡æ¯
            document.querySelector('.demo-container').insertAdjacentHTML('afterbegin', `
                <div class="success">
                    <strong>ğŸ’¡ ä½¿ç”¨æç¤ºï¼š</strong>
                    æœ¬æ¼”ç¤ºåŒ…å«äº†å¤šç§æ·±æ‹·è´å®ç°æ–¹æ³•ï¼Œä»åŸºç¡€ç‰ˆæœ¬åˆ°å¤„ç†å¤æ‚ç±»å‹å’Œå¾ªç¯å¼•ç”¨çš„é«˜çº§ç‰ˆæœ¬ã€‚
                    å»ºè®®æŒ‰é¡ºåºæµ‹è¯•ï¼Œè§‚å¯Ÿä¸åŒå®ç°çš„å·®å¼‚å’Œé€‚ç”¨åœºæ™¯ã€‚
                </div>
            `);
        });
    </script>
</body>
</html>
